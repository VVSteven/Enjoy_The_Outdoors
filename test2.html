<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <style>
    /* Styles from the original code */
  </style>
</head>
<body>

  <div class="container">
    <div class="row">
      <!-- Filter box -->
      <div class="col-md-3" id="filterBox">
        <div class="product-filter-buttons-container">
          <!-- Product Filter list -->
          <ul class="current-filters">
            <li class="clear-current-filters">Clear Filters<a href="#">x</a></li>
            <!-- Product Filter Attributes -->
            <li>Nike<a href="#" class="remove-filter-button" data-filter="Nike">x</a></li>
            <li>Adidas<a href="#" class="remove-filter-button" data-filter="Adidas">x</a></li>
            <li>£90 - £100<a href="#" class="remove-filter-button" data-filter="Price90-100">x</a></li>
          </ul>
        </div>
        <button class="btn btn-secondary btn-block mt-3" onclick="clearFilters()">Clear Filters</button>
      </div>

      <!-- Content box -->
      <div class="col-md-9" id="contentBox">
        <div class="contentItem" data-tags="nike adidas price90-100">Item 1</div>
        <div class="contentItem" data-tags="adidas price90-100">Item 2</div>
        <div class="contentItem" data-tags="nike price90-100">Item 3</div>
        <!-- Add more content items as needed -->
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script>
    function updateContent() {
      const contentItems = document.querySelectorAll('.contentItem');
      const activeFilters = Array.from(document.querySelectorAll('.current-filters > li:not(.clear-current-filters)')).map(filter => filter.textContent.trim());

      contentItems.forEach(item => {
        const itemTags = item.getAttribute('data-tags').split(' ');
        if (activeFilters.length === 0 || activeFilters.every(filter => itemTags.includes(filter))) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    }

    function clearFilters() {
      const filterList = document.querySelector('.current-filters');
      const filtersToRemove = Array.from(filterList.children).filter(filter => !filter.classList.contains('clear-current-filters'));

      filtersToRemove.forEach(filter => {
        filter.remove();
      });

      updateContent();
    }

    function createRemoveButton(filterName) {
      const removeButton = document.createElement('a');
      removeButton.href = '#';
      removeButton.classList.add('remove-filter-button');
      removeButton.textContent = 'x';
      removeButton.dataset.filter = filterName;
      return removeButton;
    }

    function addFilter(filterName) {
      const filterList = document.querySelector('.current-filters');
      const clearButton = filterList.querySelector('.clear-current-filters');
      const existingFilter = filterList.querySelector(`li[data-filter="${filterName}"]`);

      if (!existingFilter) {
        const filterItem = document.createElement('li');
        filterItem.textContent = filterName;
        filterItem.appendChild(createRemoveButton(filterName));

        filterList.insertBefore(filterItem, clearButton);
      }

      updateContent();
    }

    document.addEventListener('click', function (event) {
      if (event.target.classList.contains('remove-filter-button')) {
        event.preventDefault();
        const filterName = event.target.dataset.filter;
        event.target.parentElement.remove();
        updateContent();
      }
    });

    // Example: Adding a filter dynamically
    addFilter('NewFilter'); // Replace 'NewFilter' with the actual filter name
  </script>
</body>
</html>
